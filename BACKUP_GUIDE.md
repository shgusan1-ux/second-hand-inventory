# 자동 백업 설정 가이드

## 📌 백업 스크립트 종류

### 1️⃣ backup.bat (수동 백업)
- **사용법**: 파일을 더블클릭하면 백업 실행
- **특징**: 진행 상황을 화면에 표시
- **용도**: 중요한 작업 후 수동으로 백업할 때

### 2️⃣ auto-backup-silent.bat (자동 백업)
- **사용법**: Windows 작업 스케줄러에 등록
- **특징**: 백그라운드에서 자동 실행, backup-log.txt에 기록
- **용도**: 정기적으로 자동 백업할 때

---

## ⚙️ Windows 작업 스케줄러 설정 방법

### 1단계: 작업 스케줄러 열기
1. `Win + R` 키 누르기
2. `taskschd.msc` 입력 후 Enter
3. 작업 스케줄러 실행됨

### 2단계: 새 작업 만들기
1. 오른쪽 메뉴에서 **"기본 작업 만들기"** 클릭
2. 이름: `프로젝트 자동 백업`
3. 설명: `Second Hand Inventory 프로젝트 자동 백업`

### 3단계: 트리거 설정
**옵션 A - 1시간마다 백업**
- 트리거: "일 단위"
- 시작 시간: 오전 9:00
- 고급 설정:
  - ✅ "작업 반복 간격": 1시간
  - ✅ "다음 기간 동안": 1일

**옵션 B - 하루 1번 백업 (저녁 6시)**
- 트리거: "일 단위"
- 시작 시간: 오후 6:00

### 4단계: 작업 설정
- 작업: "프로그램 시작"
- 프로그램/스크립트: `C:\prj\second-hand-inventory\auto-backup-silent.bat`
- 시작 위치: `C:\prj\second-hand-inventory`

### 5단계: 완료
- ✅ "속성 대화 상자 열기" 체크
- "완료" 클릭

### 6단계: 추가 설정 (선택사항)
- **일반 탭**:
  - ✅ "사용자가 로그온할 때만 실행" (권장)
  - ⚠️ "가장 높은 수준의 권한으로 실행" (필요시)

- **조건 탭**:
  - ⬜ "컴퓨터의 AC 전원이 켜진 경우에만 작업 시작" (노트북의 경우 체크 해제 권장)

---

## 🔍 백업 로그 확인

백업이 제대로 실행되었는지 확인:
```bash
type backup-log.txt
```

또는 파일 탐색기에서 `backup-log.txt` 파일 열기

---

## 🚨 긴급 복구 방법

### 문제 발생 시 이전 상태로 되돌리기

**마지막 커밋으로 되돌리기:**
```bash
git reset --hard HEAD
```

**특정 시점으로 되돌리기:**
```bash
# 커밋 목록 확인
git log --oneline

# 특정 커밋으로 되돌리기 (커밋 해시 복사 후)
git reset --hard <커밋해시>
git push --force
```

**파일만 복구 (커밋 유지):**
```bash
# 특정 파일만 복구
git checkout HEAD -- <파일경로>

# 모든 파일 복구 (변경사항 취소)
git checkout .
```

---

## 📋 권장 백업 전략

### 일반 작업:
- ✅ 1시간마다 자동 백업
- ✅ 중요한 기능 완성 후 수동 백업 (`backup.bat`)

### 배포 전:
- ✅ 수동으로 백업 후 커밋 메시지 확인
- ✅ `git tag v1.0.0` 같은 태그로 버전 표시

### DB 백업:
Turso DB는 클라우드에 있지만, 로컬 백업도 권장:
```bash
# Turso DB 덤프 (별도 스크립트 제공 가능)
turso db shell second-hand-inventory --dump > backup-db.sql
```

---

## ⚠️ 주의사항

1. **git push 전 확인:**
   - `.env` 파일이 `.gitignore`에 포함되었는지 확인
   - 민감한 정보(API 키, 비밀번호)가 커밋되지 않도록 주의

2. **디스크 공간:**
   - Git은 효율적이지만, backup-log.txt는 계속 커짐
   - 주기적으로 로그 파일 정리 권장

3. **네트워크:**
   - 자동 백업은 인터넷 연결 필요 (git push)
   - 오프라인 시 로컬에만 커밋되고, 다음 백업 시 푸시됨

---

## 🎯 빠른 시작

1. **지금 바로 수동 백업 테스트:**
   ```
   backup.bat 더블클릭
   ```

2. **자동 백업 활성화:**
   - 위의 "작업 스케줄러 설정" 따라하기
   - 1시간마다 또는 하루 1번 선택

3. **로그 확인:**
   ```
   backup-log.txt 파일 열기
   ```

완료! 🎉
